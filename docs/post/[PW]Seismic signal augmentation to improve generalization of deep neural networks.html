<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/160511559?s=400&u=68ec73daff523efd8652079b221d42e446d01cb6&v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# 1.引言

## 数据增强

- 数据增强是通过生成新的训练样本，扩展训练数据集，从而避免过拟合并提高模型的泛化能力。">
<meta property="og:title" content="[PW]Seismic signal augmentation to improve generalization of deep neural networks">
<meta property="og:description" content="# 1.引言

## 数据增强

- 数据增强是通过生成新的训练样本，扩展训练数据集，从而避免过拟合并提高模型的泛化能力。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://Lszidv.github.io/post/%5BPW%5DSeismic%20signal%20augmentation%20to%20improve%20generalization%20of%20deep%20neural%20networks.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/160511559?s=400&u=68ec73daff523efd8652079b221d42e446d01cb6&v=4">
<title>[PW]Seismic signal augmentation to improve generalization of deep neural networks</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}

</style>




<body>
    <div id="header">
<h1 class="postTitle">[PW]Seismic signal augmentation to improve generalization of deep neural networks</h1>
<div class="title-right">
    <a href="https://Lszidv.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/Lszidv/Lszidv.github.io/issues/54" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>1.引言</h1>
<h2>数据增强</h2>
<ul>
<li>数据增强是通过生成新的训练样本，扩展训练数据集，从而避免过拟合并提高模型的泛化能力。它在小型数据集的深度学习模型中尤其有效，能够增加数据的多样性，帮助模型更好地识别复杂的地震信号。</li>
</ul>
<h3>泛化能力</h3>
<ul>
<li>“泛化”指模型在未见过的数据上能够保持良好的性能，这对地震监测至关重要。泛化能力受网络架构、优化方法以及训练数据集质量的影响。</li>
</ul>
<h2>地震数据增强技术</h2>
<ul>
<li>传统的图像数据增强方法（如翻转、旋转和剪切）对于地震数据并不适用，因为这些操作会破坏波形数据的物理特性。</li>
<li>随机时间偏移：对波形数据进行轻微的时间偏移。</li>
<li>事件与噪声的重新组合：将不同事件和噪声合成，以增强样本的多样性。</li>
<li>通道（和台站）丢弃：模拟缺失数据，提高模型的鲁棒性。</li>
</ul>
<h3>数据增强的优势</h3>
<ul>
<li>通过数据增强，可以在小数据集的基础上扩大深度学习的应用范围，提升模型在复杂噪声和低质量数据上的表现。适当的数据增强能够显著提高模型的泛化能力，并扩展地震监测的应用范围。</li>
</ul>
<hr>
<h1>2.基准数据和训练过程</h1>
<ul>
<li>我们收集了一个小型的高信噪比（SNR）训练数据集，包含500个手动标注的地震波形，数据来自北加州地震数据中心（NCEDC），用于展示数据增强在深度学习模型训练中的应用。我们还创建了一个验证数据集，包含500个地震波形，并使用它来在训练过程中选择最佳模型。为了评估数据增强方法，我们使用了一个更大的测试数据集，包含10000个2018年记录的地震波形。</li>
</ul>
<h2>数据集划分</h2>
<ul>
<li>
<p><strong>训练集</strong>：500个高信噪比的地震波形。</p>
</li>
<li>
<p><strong>验证集</strong>：500个高信噪比的地震波形。</p>
</li>
<li>
<p><strong>测试集</strong>：10000个2018年记录的地震波形。</p>
</li>
<li>
<p>这些数据集的比例设计是为了评估数据增强在小型数据集上的效果。</p>
</li>
</ul>
<h2>数据增强与训练过程</h2>
<ul>
<li>我们使用PhaseNet架构作为基准，进行相位拾取问题的深度学习训练。在训练过程中，去除了dropout、学习率衰减和权重衰减，只保留了批量归一化。优化器使用Adam，学习率为0.01，批量大小为20，训练周期为100。数据增强通过生成新的训练样本，增加了训练数据集的多样性。</li>
</ul>
<h2>训练效果</h2>
<ul>
<li>数据增强可以有效增加训练数据的多样性，提高模型的泛化能力。通过适当的修改，我们的结果可以应用于地震检测、相位检测等其他深度学习地震数据应用。</li>
</ul>
<hr>
<h1>3.数据增强</h1>
<h2>3.1随机偏移</h2>
<ul>
<li>在地震数据处理中，随机偏移被用来避免模型仅记住固定的时间点，而无法有效处理其他时间点的数据。通过在每个训练epoch中实时应用不同的偏移，随机偏移增加了训练样本的多样性，并提高了模型的检测性能。</li>
</ul>
<h2>训练与评估</h2>
<ul>
<li>我们在30秒的时间窗口上训练了三个模型，分别使用无随机偏移、有限随机偏移（10到15秒）和完全随机偏移（0到30秒）。通过滑动测试波形并记录P波到达预测，我们发现没有随机偏移的模型会在固定的P波到达时间（10秒）产生高概率分数，而有限偏移的模型则会在窗口边缘出现偏差。</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/92f53c70-ee9a-49be-aefe-a2118e95cee9"><img width="1385" height="911" alt="Image" src="https://github.com/user-attachments/assets/92f53c70-ee9a-49be-aefe-a2118e95cee9" style="max-width: 100%; height: auto; max-height: 911px;"></a></p>
<h2>随机偏移的优势</h2>
<ul>
<li><strong>实时随机偏移</strong>：能够增加样本的多样性，提高性能。</li>
<li><strong>固定时间偏移</strong>：可能导致模型只对固定时间窗口有效，无法处理其他时间段的数据。</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/5fb39697-bed9-4859-afbd-76d8d71cab07"><img width="903" height="366" alt="Image" src="https://github.com/user-attachments/assets/5fb39697-bed9-4859-afbd-76d8d71cab07" style="max-width: 100%; height: auto; max-height: 366px;"></a></p>
<ul>
<li>为了避免零填充引入的偏差，建议使用较大的训练窗口（如90秒），并检查增强前后的到达时间分布。</li>
</ul>
<h2>3.2事件叠加</h2>
<ul>
<li>地震训练数据通常只包含一个单独的事件，但这可能导致神经网络学习到偏差，忽视时间窗口内的较小事件。为了解决这个问题，我们引入了事件叠加方法，通过将多个事件合成一个训练样本来消除这种偏差，从而提高模型在检测多个事件时的性能。</li>
</ul>
<h2>训练效果</h2>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/a5494808-09cb-4623-a5da-c12661ce4e2d"><img width="884" height="879" alt="Image" src="https://github.com/user-attachments/assets/a5494808-09cb-4623-a5da-c12661ce4e2d" style="max-width: 100%; height: auto; max-height: 879px;"></a></p>
<ul>
<li>图4展示了事件叠加的效果：没有叠加事件的模型只能检测到第一个较大的地震事件，而经过事件叠加训练的模型能够成功预测第二个较小的事件。事件叠加通过随机调整事件振幅比例，增强了神经网络对较小地震的检测能力。</li>
</ul>
<h2>避免完全重叠事件</h2>
<ul>
<li>虽然在实际地震数据中，事件波形可能完全重叠，但我们避免在训练数据中合成这些完全重叠的事件，以防止误报。</li>
</ul>
<h2>适用场景</h2>
<ul>
<li>训练良好的模型应能对重叠波形的事件进行泛化。在需要模拟地震群的特殊应用中，堆叠更多的重叠事件可能非常有用。</li>
</ul>
<h2>结束时间估算</h2>
<ul>
<li>对于大多数数据集，地震波形的结束时间无法直接获得，可以通过P波和S波的到达时间差来粗略估计地震的结束时间。另一种方法是使用类似于余波震级估计中使用的包络函数来测量。</li>
</ul>
<h2>3.3叠加噪声</h2>
<ul>
<li>叠加噪声是一种有效的增强方法，能够提高神经网络在低信噪比（SNR）数据上的性能。通过将噪声叠加到高SNR信号上，我们可以保持标签的高可靠性，并增强模型对埋藏在噪声中的弱信号的检测能力。</li>
</ul>
<h2>训练效果</h2>
<ul>
<li><strong>高SNR数据</strong>：即使使用小型训练数据集，也能获得高精度、召回率和F1分数。</li>
<li><strong>低SNR数据</strong>：仅使用高质量样本训练时，低SNR测试样本的召回率较低。通过叠加噪声进行训练后，低SNR数据的召回率和F1分数显著提高。</li>
</ul>
<h2>噪声选择</h2>
<ul>
<li>叠加噪声的选择取决于具体应用场景。使用真实地震噪声能够获得更真实的增强效果，避免误标记。但需要注意避免在噪声窗口中包含未检测到的事件，以避免增加误标率。</li>
</ul>
<h2>精度与召回率</h2>
<ul>
<li>通过调整激活阈值并生成ROC曲线，可以平衡精度与召回率，进一步优化模型性能。</li>
</ul>
<h2>3.4假阳性噪声</h2>
<ul>
<li>叠加假阳性噪声（如非地震信号）是处理复杂噪声的另一种方法，尤其适用于训练神经网络识别负样本并减少假阳性率。通过添加假阳性噪声，可以增强模型对类似地震信号的噪声的识别能力，从而改善模型的鲁棒性。</li>
</ul>
<h2>训练效果</h2>
<ul>
<li><strong>未增强的模型</strong>：在遇到波形突变时（如仪器错误），模型会产生P波和S波的错误预测。</li>
<li><strong>增强后</strong>：通过添加类似噪声样本，模型能够有效抑制假阳性预测。</li>
</ul>
<h2>主动学习</h2>
<ul>
<li>主动学习可以提高假阳性样本的识别效率。通过对未标记样本进行排序并优先标注最有信息量的样本，能够显著提高训练效率，尤其是在面对大量未标记数据时。</li>
</ul>
<h2>噪声选择</h2>
<ul>
<li>虽然使用真实的噪声能提供更真实的增强效果，但必须小心避免将未检测到的事件包含在噪声中，这样可以避免误标率的增加并保持模型性能。</li>
</ul>
<h2>3.5通道丢弃</h2>
<ul>
<li>三分量地震数据在现代地震学中非常常见，但单通道数据仍然广泛存在于历史记录中，并且某些部署中仍在使用。通道丢弃是一种有效的增强策略，帮助神经网络处理丢失通道的数据。通过在训练过程中随机丢弃一个或多个通道，神经网络学会在缺少某些通道数据的情况下进行预测，从而提高模型的鲁棒性。</li>
</ul>
<h2>训练效果</h2>
<ul>
<li><strong>高质量数据</strong>：模型在三分量数据上的表现类似，但使用通道丢弃训练的模型在单通道数据上表现更好。</li>
<li><strong>P波拾取</strong>：仅使用Z分量的性能与使用所有分量的性能相似，反映出Z分量提供了拾取P波到达的大部分信息。</li>
<li><strong>S波拾取</strong>：水平EN分量包含了拾取S波到达的关键信息。</li>
</ul>
<h2>防止过拟合</h2>
<ul>
<li>通道丢弃可以有效防止模型在主导台站上过拟合，并增强在数据缺失或损坏情况下的适应能力。</li>
</ul>
<h2>数据增强应用</h2>
<ul>
<li>在处理单通道数据时，通道丢弃增强了神经网络的鲁棒性，使其能够处理丢失通道或部分台站数据的情况。</li>
</ul>
<h2>3.6重采样</h2>
<h2>不平衡数据问题</h2>
<ul>
<li>在深度学习中，使用不平衡的数据集进行有效训练是一个挑战，尤其是地震信号训练中，由于地震震级分布的幂律关系，大震级地震的数据较少。重采样技术能够通过过采样少数类或欠采样多数类来解决这一问题，从而提高模型的泛化能力。</li>
</ul>
<h2>随机重采样</h2>
<ul>
<li>随机重采样可以通过调整类别分布来解决数据不平衡问题，但过度过采样可能导致模型过拟合，不能有效捕捉大震级地震的多样性。将过采样与数据增强方法结合使用可能是更有效的策略。</li>
</ul>
<h2>先进重采样方法</h2>
<ul>
<li>除了传统的重采样方法外，SMOTE、ADASYN和GAN等先进方法可以用来合成训练样本，从而进一步提高训练数据集的多样性和有效性。</li>
</ul>
<h2>3.7合成数据生成</h2>
<ul>
<li>在一些应用中，增强技术可以用来生成半合成数据进行训练。通过合成输入和目标对，从大量地震波形中合成训练数据，以解决标签未知的问题。例如，通过合成去噪掩模和截波波形恢复，我们能够有效生成训练数据，从而提高神经网络的性能。</li>
</ul>
<h2>增强方法的优势</h2>
<ul>
<li><strong>去噪和截波恢复</strong>：这些增强方法利用已知的真实信号（未截波或去噪波形）提供准确的训练标签。</li>
<li><strong>模拟和增强结合</strong>：通过合成数据与实际噪声结合，可以生成训练数据以提高大震级地震的检测能力。</li>
</ul>
<h2>模型微调与迁移学习</h2>
<ul>
<li>使用模拟数据训练的模型可能存在泛化问题，因此需要通过迁移学习或微调来缩小泛化差距。</li>
</ul>
<h2>未来研究方向</h2>
<ul>
<li>由于大地震的重要性，研究如何更好地处理大地震数据并提高模型泛化能力，成为未来的研究动力。</li>
</ul>
<hr>
<h1>4.讨论</h1>
<ul>
<li>本文介绍并讨论了多种增强技术，这些技术能够提升深度学习方法在地震学应用中的表现。通过结合这些增强方法，可以有效增加训练样本的多样性并提高模型的泛化能力，尤其在数据集较小的情况下。</li>
</ul>
<h2>增强技术</h2>
<ul>
<li><strong>训练时增强</strong>：如叠加噪声，旨在增加训练样本的复杂性和多样性，从而使得神经网络学习更加准确的决策边界。</li>
<li><strong>测试时增强</strong>：如过滤方法，能够通过将信号转换为高SNR频率带来提高在噪声数据上的预测准确性。</li>
</ul>
<h2>测试时增强</h2>
<ul>
<li>测试时增强方法通过采样合适的变换，帮助简化识别任务并通过聚合不同的增强方法提高预测的稳健性。对于地震数据，数据预处理方法，如过滤，可以作为有效的测试时增强方法。如1Hz高通滤波等测试时增强方法可以提高预测性能，特别是在处理噪声数据时。</li>
</ul>
<h2>泛化与深度学习模型的其他因素</h2>
<ul>
<li>除了数据增强方法，深度学习模型的泛化能力还受神经网络架构、损失函数、优化方法等因素的影响。训练过程中使用的技术，如dropout和批量归一化，有助于防止过拟合并提高模型的稳定性。</li>
</ul>
<h2>数据处理领域的选择</h2>
<ul>
<li>对于地震数据，选择合适的数据处理领域（如时域、时频域或小波域）对于模型性能至关重要。神经网络能够灵活处理多维数据，地震信号可以在时域或频域中表示，这有助于在地震检测和去噪等任务中应用深度学习模型。</li>
</ul>
<h2>卷积神经网络</h2>
<ul>
<li>卷积神经网络的卷积核与傅里叶或小波变换中的核函数有一定的相似性，经过训练的卷积核能够捕捉频率和方向等特征，这对图像识别和地震信号处理都有重要作用。</li>
</ul>
<h2>时频域训练的优势与挑战</h2>
<ul>
<li>地震数据转换为时频域有助于捕捉频率信息，但同时也带来了较高的计算成本和时间分辨率的损失。</li>
</ul>
<h2>迁移学习与领域适应</h2>
<ul>
<li>迁移学习和领域适应是解决标签数据不足的有效方法。迁移学习通过将从大型数据集学到的特征和知识迁移到新任务中，而领域适应则是在两个不同数据集上执行相同任务。对于地震信号，迁移学习能够提取共享的低级特征，从而应对数据不足的问题。</li>
</ul>
<h2>预训练与自训练</h2>
<ul>
<li><strong>预训练</strong>：通过无监督预训练方法，如自编码器，可以提取适合迁移学习的良好数据表示。</li>
<li><strong>自训练</strong>：在标注数据集上训练模型后，生成伪标签并将未标记数据与标注数据结合，进一步提升模型性能。</li>
</ul>
<h2>迁移学习在地震数据中的应用</h2>
<ul>
<li>由于地震信号的相似性，预训练的神经网络能够提取通用低级特征，这些特征可应用于地震数据任务，特别是在数据稀缺的情况下。</li>
</ul>
<h2>自训练的优势</h2>
<ul>
<li>自训练方法通过生成伪标签来充分利用未标记数据，能够有效提高模型的性能，并通过迭代优化来进一步提升结果。</li>
</ul>
<hr>
<h1>结论</h1>
<h2>数据增强</h2>
<ul>
<li>数据增强是提高深度神经网络性能和泛化能力的高效方法，特别适用于标签数据稀缺的情况。本文介绍并分析了适用于地震数据的增强方法。尽管使用了较小的训练数据集，结果表明，数据增强能够减轻训练数据中的偏差，并提升在具有不同统计特征的数据集上的性能。</li>
</ul>
<h2>数据增强的优势</h2>
<ul>
<li>数据增强方法独立于特定神经网络模型，且与训练相比计算成本较低，因此可以广泛地应用于地震数据的深度学习模型训练。</li>
</ul>
<p><a href="https://doi.org/10.1016/bs.agph.2020.07.003" rel="nofollow">Paper Link</a></p></div>
<div style="font-size:small;margin-top:8px;float:right;">转载请注明出处</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://Lszidv.github.io">芜尽</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","Lszidv/Lszidv.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}



</script>


</html>
